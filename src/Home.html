<section>
	<p class="large blue title">Roll'in club dunkerque</p>
</section>

<section>
	<p class="dark-gray title">Adresse</p>
	<p>Salle de sport du lycée de l'Europe</p>
	<p>809 Rue du Banc vert</p>
	<p>59640 Dunkerque</p>

	<div class="map-container">
		<iframe class="map" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2509.847016389118!2d2.353084015917681!3d51.01897505411693!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x23103bd5b7fc888!2sGymnase+du+Lyc%C3%A9e+de+l&#39;Europe!5e0!3m2!1sen!2sfr!4v1551816962334"
		 title="map" width="600" height="450" frameborder="0" style="border:0" allowfullscreen></iframe>
	</div>
</section>
<div class="row-container wrap info">

	<div class="column-container teams">
		{#each $teams as team}
		<section>
			<p class="dark-gray title">{team.name}</p>
			<p class="light-gray">{team.description}</p>
			{#each team.schedules as schedule}
			<p class="dark-gray">{schedule}</p>
			{/each}
		</section>
		{/each}
	</div>

	<section class="results">
		<p class="dark-gray title">Derniers résultats</p>
		<Results results={GetLastResults($seasons)} />
	</section>
</div>

<style>
  .map-container {
    display: inline-flex;
    justify-content: center;
    width: 100%;
  }

  section {
    padding-bottom: 30px;
    width: 100%;
  }

  .info {
    justify-content: center;
    width: 100%;
  }

  .team-description {
    font-weight: 400;
    margin-bottom: 4px;
  }

  p {
    text-align: center;
  }

  .teams {
    width: 400px;
  }
  .results {
    width: 400px;
  }

  @media screen and (max-width: 768px) {
    .teams {
      width: 100%;
      padding-bottom: 50px;
    }
    .results {
      width: 100%;
    }
  }
</style>

<script>
  import Results from "./Results.html";
  import store from "./store.js";

  export default {
    store: () => store,
    helpers: {
      GetLastResults(seasons) {
        var season = seasons[0];
        var results = season.results;
        var selectedResults = [];
        var count = 0;
        for (var i = results.length; i-- > 0; ) {
          if (
            results[i].ateam == "DUNKERQUE" ||
            results[i].bteam == "DUNKERQUE"
          ) {
            selectedResults.push(results[i]);
            count++;
          }
          if (count == 5) break;
        }
        return selectedResults;
      }
    },
    components: {
      Results
    }
  };
</script>