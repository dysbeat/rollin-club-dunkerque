<section>
	<p class="club">Roll'in club dunkerque</p>
</section>

<section>
	<p class="title">Adresse</p>
	<p>Salle de sport du lycée de l'Europe</p>
	<p>809 Rue du Banc vert</p>
	<p>59640 Dunkerque</p>

	<div class="map-container">
		<iframe class="map" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2509.847016389118!2d2.353084015917681!3d51.01897505411693!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x23103bd5b7fc888!2sGymnase+du+Lyc%C3%A9e+de+l&#39;Europe!5e0!3m2!1sen!2sfr!4v1551816962334"
		 title="map" width="600" height="450" frameborder="0" style="border:0" allowfullscreen></iframe>
	</div>
</section>

<div class="information">

	<div class="team-container">
		{#each $teams as team}
		<section>
			<p class="title">{team.name}</p>
			<p class="team-description">{team.description}</p>
			{#each team.schedules as schedule}
			<p class="team-schedule">{schedule}</p>
			{/each}
		</section>
		{/each}
	</div>

</div>

<div class="results">
	<section>
		<p class="title">Derniers résultats</p>
		{#each GetLastResults($seasons) as result}
		<Result result={result} />
		{/each}
	</section>
</div>

<style>
  .map-container {
    display: inline-flex;
    justify-content: center;
    width: 100%;
  }

  .club {
    text-align: center;
    font-weight: 600;
    color: hsl(220, 37%, 45%);
    padding-top: 20px;
  }
  section {
    padding-bottom: 30px;
  }

  .team-container {
    display: -webkit-box; /* OLD - iOS 6-, Safari 3.1-6 */
    display: -moz-box; /* OLD - Firefox 19- (buggy but mostly works) */
    display: -ms-flexbox; /* TWEENER - IE 10 */
    display: -webkit-flex; /* NEW - Chrome */
    display: flex; /* NEW, Spec - Opera 12.1, Firefox 20+ */
    -webkit-flex-direction: column;
    -moz-flex-direction: column;
    -ms-flex-direction: column;
    flex-direction: column;
  }

  .team {
    width: 100px;
  }

  .team-description {
    font-weight: 400;
    margin-bottom: 4px;
  }

  .team-schedule {
    color: hsl(203, 15%, 20%);
  }

  p {
    text-align: center;
    margin-left: 5px;
    color: hsl(203, 15%, 47%);
  }

  .title {
    font-weight: 600;
    margin-left: 0px;
    color: hsl(203, 15%, 20%);
  }

  .information {
    width: 400px;
    float: left;
  }
  .results {
    width: 400px;
    float: right;
  }

  @media screen and (max-width: 768px) {
    p {
      text-align: center;
    }
    .information {
      width: 100%;
      padding-bottom: 50px;
      align-self: center;
    }
    .results {
      width: 100%;
      align-self: center;
    }
  }
</style>

<script>
  import Result from "./Result.html";
  import store from "./store.js";

  export default {
    store: () => store,
    helpers: {
      GetLastResults(seasons) {
        var season = seasons[0];
        var results = season.results;
        var selectedResults = [];
        var count = 0;
        for (var i = results.length; i-- > 0; ) {
          if (
            results[i].ateam == "DUNKERQUE" ||
            results[i].bteam == "DUNKERQUE"
          ) {
            selectedResults.push(results[i]);
            count++;
          }
          if (count == 5) break;
        }
        return selectedResults;
      }
    },
    components: {
      Result
    }
  };
</script>